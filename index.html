<html>
<head>
  <meta charset="utf-8">
  <title>Gentrification in NYC</title>

  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="https://fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">
  <!-- Stylesheets -->
  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/skeleton.css">
  <link rel="stylesheet" href="css/custom.css">
  <link rel="stylesheet" href="http://libs.cartocdn.com/cartodb.js/v3/themes/css/cartodb.css" />

  <link rel="icon" type="image/png" href="images/favicon.png">

  <script src="http://libs.cartocdn.com/cartodb.js/v3/cartodb.js"></script>

  <script>
  // First map.
    window.onload = function() {

      var map1 = new L.Map('cartodb-map1', {
        zoomControl: false,
        center: [40.73,-73.76],
        zoom: 11
      })

      var map2 = new L.Map('cartodb-map2', {
        zoomControl: false,
        center: [40.73,-73.76],
        zoom: 11
      })

      map1.doubleClickZoom.disable();
      map1.scrollWheelZoom.disable();
      map1.dragging.disable();

      map2.doubleClickZoom.disable();
      map2.scrollWheelZoom.disable();
      map2.dragging.disable();

      // Create layer selector.
      function createSelector(layer,num) {
       for (var i = 0; i < layer.getSubLayerCount(); i++) {
        if (i === num) {
          layer.getSubLayer(i).show();
        } else {
          layer.getSubLayer(i).hide();
        }
       }
      }

      // Get layer tiles.
      L.tileLayer('http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png').addTo(map1);
      L.tileLayer('http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png').addTo(map2);

      // For storing sublayer outside of createlayer.
      var layerUrl1 = 'https://masta-g3.cartodb.com/api/v2/viz/9e117f7e-beed-11e5-8311-0ecd1babdde5/viz.json';
      var layerUrl2 = 'https://masta-g3.cartodb.com/api/v2/viz/5bf7d944-bef2-11e5-99ed-0e674067d321/viz.json';
      var sublayers;

      // Add data layer to your map.
      cartodb.createLayer(map1, layerUrl1, { legends: false })
          .addTo(map1)
          .done(function(layer) {
            $("li").on('click', function(e) {
              var num = +$(e.target).attr('data');
              createSelector(layer,num,$(e.target).hasClass('vio'));
            });
          })
          .error(function(err) {
              console.log("error: " + err);
          });

      cartodb.createLayer(map2, layerUrl2, { legends: false })
          .addTo(map2)
          .done(function(layer) {
            $("li").on('click', function(e) {
              var num = +$(e.target).attr('data');
              createSelector(layer,num,$(e.target).hasClass('vio'));
            });
          })
          .error(function(err) {
              console.log("error: " + err);
          });
      }

      $( document ).ready(function() {
          $( "#js-layer-selector1" ).click(function() {
              $( '.layer_selector' ).toggleClass( "is-active" );
          });
      });

      $( document ).ready(function() {
          $( "#js-layer-selector2" ).click(function() {
              $( '.layer_selector' ).toggleClass( "is-active" );
          });
      });
  </script>
</head>


<body>
  <div id="title" class="section">
    <div class="container">
      <div class="row">
        <div class="one-half column">
          <h1>Gentrification in NYC</h1>
          <p class="credits">Manuel Rueda · December 16, 2015</p>
        </div>
        <div class="one-half column logo">
          <img class="u-max-full-width" src="images/logo.png">
        </div>
      </div>
    </div>
  </div>

  <div id="content" class="container">
    <div id="intro" class="row">
      <h4>Introduction</h4>
      <p>Gentrification is a subject that has received significant media and academic attention in the last few decades, mainly because it’s a process powered by the possibility of mobility which has been limited in earlier years. Given the recent rise of this phenomena, researchers have not yet been able to reach an agreement on what are its causes, its social and economical effects, or even on what constitutes a formal process of gentrification. Regardless of this, the subject is one that continues to gain importance, mainly because it has been accelerating on recent years, and it has significant implications in public policy; for example, in several studies it has been negatively associated with the displacement of population and loss of capital investment.</p>
      <p>An interesting study performed on this subject is that of <em>Nathalie Voorhees</em> from Chicago's Center for Neighborhood and Community Improvement. On it, the researcher takes 13 variables that have been associated with gentrification and neighborhood upgrading in the literature and uses them to create a <em>Gentrification Index</em> that evaluates the evolution of this process throughout Chicago's different community areas. More details can be found <a href="http://www.voorheescenter.com/#!gentrification-index/ccmx" target="_blank">here</a>. We will translate Voorhees' study to the New York Metro area, investigating the relevance of our results under this different social and economic context.</p>

      <h4>Data</h4>
      <p>The variables utilized in our study will be the same as those identified by Voorhees' and their values will be retrieved from United States Census Bureau's <em>American FactFinder</em>. The analysis will take place on a census tract level, which makes sense when accounting for the high density of the analysis area. For the study, the counties of New York, Bronx, Kings and Queens will be considered. The table below presents the 13 variables and their associated relationship to the gentrification index, based on the findings of existing literature. Variable names used in this study are also shown. The base analysis year is 2013.</p>
    </div>

    <div id="table" class="row">
      <table class="u-full-width">
        <thead>
          <tr>
            <th>Hammel, et al. (1996-2005)</th>
            <th>Ley (1992)</th>
            <th>Others (1987-2014)</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><b>[+]</b> % College Education (EDUCATION13)</td>
            <td><b>[-]</b> % Families on Poverty (POVERTY13)</td>
            <td><b>[-]</b> % Female Led Households (FEM13)</td>
          </tr>
          <tr>
            <td><b>[+]</b> % Managerial Jobs (MGMT13)</td>
            <td><b>[-]</b> % Elderly (ELDER13)</td>
            <td><b>[+]</b> % Private School Attendance (PRIV13)</td>
          </tr>
          <tr>
            <td><b>[+]</b> % Owner Occupied (OWNER13)</td>
            <td><b>[+]</b> Median House Value (HOUSEVAL13)</td>
            <td><b>[-]</b> % Children (CHILD13)</td>
          </tr>
          <tr>
            <td><b>[+]</b> % White (WHITE13)</td>
            <td><b>[+]</b> Median Family Income (INCOME13)</td>
            <td></td>
          </tr>
          <tr>
            <td><b>[-]</b> % Black (BLACK13)</td>
            <td></td>
            <td></td>
          </tr>
          <tr>
            <td><b>[-]</b> % Latin (LATIN13)</td>
            <td></td>
            <td></td>
          </tr>
        </tbody>
      </table>
    </div>

    <div id="correlations" class="row">
      <h4>Correlation Across Variables</h4>

      <p>A first step for this investigation is evaluate how the variables interact with each other, that is, how are they correlated. The plot below presents this information for the whole geographical area of analysis.</p>

      <iframe width="650" height="550" frameborder="0" scrolling="no" src="https://plot.ly/~masta_g3/7.embed"></iframe>

      <p>We can see that the expected relationships hold, that is, variables negatively associated with the gentrification index are inversely correlated with those that have a possitive association with the index.</p>

      <p>This graph, although informative, is too cluttered to be easily interpreted. Below we present how HOUSEVAL13 correlates with the rest of the variables on each of the different counties. If we assume that median house value is the main indicator of gentrification or neighborhood upgrade, we can test if the relationships proposed in the literature hold.</p>

      <iframe width="900" height="800" frameborder="0" scrolling="no" src="https://plot.ly/~masta_g3/27.embed"></iframe>

      <p>We observe that although in general the proposed relationships hold, the magnitude of the correlations differs across counties. It seems that the relationship is almost negligible in the Bronx county, while the effects are largest on the New York and Kings'. Both the Manhattan and Brooklyn boroughs are contained on these two counties, and are generally regarded by the media as the neighborhoods where gentrification is most prevalent.</p>
    </div>

    <div id="variables" class="row">
      <h4>Distribution of Variables in Space</h4>
      <p>We will now focus our attention in the specific distribution of the index varibles in space. We are interested in identifying possible clusters that could indicate some sort of spatial autocorrelation, if this exists. Due to CartoDB licencing restrictions, on this map we are only able to show 4 variables: <em>%College Education, %Black, %Median House Value & Score.</em> The first map below shows their distribution, with darker colors representing larger values. On the second map we can find a Moran's I cluster analysis, where green regions signal statistically significant positive clusters and red the negative ones.</p>
      <div id="cartodb-map1"> </div>
      <div id="cartocss1" class="layer_selector">
        <p id="js-layer-selector1"><b>VARIABLE SELECTOR</b></p>
        <ul class="LayerSelector-list">
          <li data="0">% College Education</li>
          <li data="1">% Black</li>
          <li data="2">Median House Value</li>
          <li data="3">Score</li>
        </ul>
      </div>
      </br>
      <div id="cartodb-map2"> </div>
    </div>

    <!--div id="clusters" class="row">
      <p>We will now focus our attention in the specific distribution of the index varibles in space. We are interested in identifying possible clusters that could indicate some sort of spatial autocorrelation, if this exists. Due to CartoDB licencing restrictions, on this map we are only able to show 4 variables: <em>%College Education, %Black, %Median House Value & Score.</em></p>
      <div id="cartodb-map2"> </div>
      <div id="cartocss2" class="layer_selector">
        <p id="js-layer-selector2">VARIABLE SELECTOR</p>
        <ul class="LayerSelector-list">
          <li data="0">% College Education</li>
          <li data="1">% Black</li>
          <li data="2">Median House Value</li>
          <li data="3">Score</li>
        </ul>
      </div>
    </div-->

  <!--div class="section values">
    <div class="container">
      <div class="row">
        <div class="one-third column value">
          <h2 class="value-multiplier">67%</h2>
          <h5 class="value-heading">Purchase Increase</h5>
          <p class="value-description">Percentage of users more likely to purchase on mobile friendly site.</p>
        </div>
        <div class="one-third column value">
          <h2 class="value-multiplier">90%</h2>
          <h5 class="value-heading">Multi-device Users</h5>
          <p class="value-description">Most of the world accesses the internet on multiple devices.</p>
        </div>
        <div class="one-third column value">
          <h2 class="value-multiplier">66%</h2>
          <h5 class="value-heading">Sad Users</h5>
          <p class="value-description">Percentage of users that are frustrated with page load times.</p>
        </div>
      </div>
    </div>
  </div>

  <div class="section categories">
    <div class="container">
      <h3 class="section-heading">Responsive Images</h3>
      <p class="section-description">Skeleton images sit easily in grid with .u-max-full-width class. I suggest exploring solution to serving different images based on device size.</p>
      <div class="row">
        <div class="one-half column category">
          <img class="u-max-full-width" src="images/placeholder.png">
        </div>
        <div class="one-half column category">
          <img class="u-max-full-width" src="images/placeholder.png">
        </div>
      </div>
    </div>
  </div-->
</body>

</html>
